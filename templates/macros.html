<!--  This macro produces a number of columns which can be embedded into either
      the documents page or the settings page. A row is either a document or a
      user; a column is the class of user (eg. admin, judge, jury). 'active'
      indicates whether the kind of permission determined by the page has been
      granted. -->

{% macro matrix_cell(row, col, active) %}
<td class="matrix{% if active %} active{% endif %}"
  data-row="{{ row }}" data-col="{{ col }}"
  data-action="{% if active %}deny{% else %}grant{% endif %}"></td>
{% endmacro %}

{% macro matrix_row(page, row_id, groups) %}

{{ matrix_cell(row_id, 'judge', 'judge' in groups) }}
{{ matrix_cell(row_id, 'jury', 'jury' in groups) }}
{{ matrix_cell(row_id, 'witness', 'witness' in groups) }}
<td class="matrix delete" data-row="{{ row_id }}" data-action="delete"></td>

{% endmacro %}
