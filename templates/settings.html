{% extends "base.html" %}
{% from "macros.html" import matrix %}
{% block title %}Admin{% endblock %}

{% block content %}

<h2>Users</h2>

<table id="users">
  <tr>
    <th>User</th>
    <th>Added</th>
    <th>Seen</th>
    <th>Admin</th>
    <th>Judge</th>
    <th>Jury</th>
    <th>Witness</th>
    <th>Delete</th>
  </tr>
  {% for name, user in users.items() %}
  <tr>
    <td>{{ name }}</td>
    <td class="added">
      <span class="date">{{ user.added | localise | long_date }}</span><br>
      <span class="time">{{ user.added | localise | long_time }}</span>
      <span class="tz">{{ user.added | localise | tz }}</span>
    </td>
    <td class="seen">
      <span class="date">{{ user.seen | localise | long_date }}</span><br>
      <span class="time">{{ user.seen | localise | long_time }}</span>
      <span class="tz">{{ user.seen | localise | tz }}</span>
    </td>
    <td><button>Create admin certificate</button></td>
    {{ matrix(users, 'sftp', 'name', name) }}
  </tr>
  {% endfor %}
  <tr>
    <td><input name="name" placeholder="Name"></td>
    <td colspan="7"><button>Create new user</button></td>
  </tr>
</table>

<h2>Filesystem</h2>

<table>
  <tr>
    <th>Total storage</th>
    <td>{{ (fsdata.total / 2**30) | round }} GiB</td>
  </tr><tr>
    <th>Used storage (total)</th>
    <td>{{ (fsdata.used / 2**30) | round }} GiB
      ({{ (fsdata.used / fsdata.total * 100) | round }}%)</td>
  </tr><tr>
    <th>Used storage (case data)</th>
    <td>{{ (fsdata.crypt_used / 2**20) | round }} MB
      ({{ (fsdata.crypt_used / fsdata.total * 100) | round }}%)</td>
  </tr>
</table>

{% endblock %}
