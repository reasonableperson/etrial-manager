#events { worker_connections 1024; }
#http {
  #include mime.types;
  #types_hash_max_size 4096;

  # send all our logs to journald for fast processing
  access_log syslog:server=unix:/dev/log;
  error_log syslog:server=unix:/dev/log info;

  server {
    listen       443 ssl;
    server_name  demo.court.digital;
    client_max_body_size 4G;
    ssl_client_certificate client.crt;
    ssl_verify_client      on;

    location /keys { root /crypt; add_header Content-Disposition 'attachment'; }
    location /store { root /crypt; default_type application/pdf; }
    location /static { root /var/lib/etrial; }
    location / {
      proxy_pass http://127.0.0.1:8000;
      proxy_set_header X-Ssl-Client-Fingerprint $ssl_client_fingerprint;
      proxy_set_header X-Ssl-Client-Subject $ssl_client_s_dn;
    }
  }
#}
